ER图组成：实体、属性、联系
# 数据库范式
* 1NF:属性不可再分割
* 2NF：1NF的基础上，消除了非主属性对于码的部分函数依赖
* 3NF：2NF的基础上，消除了非主属性对于码的传递函数依赖
# drop、delete、truncate区别
* drop（丢弃数据）：直接删除表 DDL 数据定义语言（立即生效，无法回滚）
* truncate：清空数据 DDL
* delete：删除数据 DML 数据操控语言

Order by 必须放在Where语句后
# MyISAM和InnoDB有什么区别
* InnoDB支持行级锁，MyISAM不支持，只支持表级别的锁粒度。
* MyISAM不提供事务支持。InnoDB提供事务支持，实现了SQL标准定义了四个隔离级别。
* MyISAM不支持外键，而InnoDB支持。
* MyISAM不支持MVVC,而InnoDB支持。
* 虽然两者都是用B+Tree作为索引，但是两者的实现方式不同。
* MyISAM不支持数据库异常崩溃后的安全恢复，而InnoDB支持。
* InnoDB的性能比MyISAM更强大。

# 数据库索引
索引是一种用于快速查找和检索数据的数据结构，其本质可以看成是一种排序好的数据结构。
相当于书的目录，常见索引结构有:B树，B+树和HASH、红黑树。MySQL中，InnoDB还是Myksam，都使用B+树作为索引结构。
# 索引的优缺点
* 优点：
  * 使用索引可以大大加快数据的检索速度（大大减少检索的数据量），这也是创建索引的最主要的原因。
  * 通过创建唯一性索引，可以保证数据库表中每一行数据的唯一性。
* 缺点：
  * 创建索引和维护索引需要耗费许多时间。当对表中的数据进行增删改的时候，如果数据有索引，那么索引也需要动态修改，会降低SQL执行效率。
  * 索引需要使用物理文件存储，也会耗费一定空间。、
* 多数情况下，索引查询比全盘扫描快，但是如果数据库的数据量不大，那么使用索引也不一定能够带来很大提升。
# 索引底层结构
* Hash表：通过Key快速取出Value。缺点，Hash不支持顺序和范围查询。
* B树&B+树：B（Balance）
  * B树的所有节点既存放键（Key）也存放数据（data），而B+树只有叶子节点存放Key和data，其他节点只存放key。
  * B树的叶子节点都是独立的；B+树的叶子节点有一条引用链指向与它相邻的叶子节点。
  * B树的检索过程相当于对范围内的每个节点的关键字做二分查找，可能没有到达叶子节点，检索就结束了。而B+树的检索效率很稳定，任何查找都是从根节点到叶子节点的过程，叶子系欸但的顺序检测很明显。
# 索引类型
* 聚簇索引：索引结构和数据一起存放的索引，InnoDB中的主键索引就属于聚簇索引
  * 优点：
    * 查询速度非常快
    * 对排序查找和范围查找优化
  * 缺点：
    * 依赖于有序的数据
    * 更新代价大
* 非聚簇索引：索引结构和数据分开存放的索引，二级索引就属于非聚簇索引。Mysql的MyISAM引擎，不管主键还是非主键，使用的都是非聚簇索引。
  * 优点：
    * 更新代价比聚簇索引要小。
  * 缺点：
    * 依赖于有序的数据
    * 可能会二次查询
  
# 二级索引
* 唯一索引(Unique Key) ：唯一索引也是一种约束。唯一索引的属性列不能出现重复的数据，但是允许数据为 NULL，一张表允许创建多个唯一索引。 建立唯一索引的目的大部分时候都是为了该属性列的数据的唯一性，而不是为了查询效率
* 普通索引(Index) ：普通索引的唯一作用就是为了快速查询数据，一张表允许创建多个普通索引，并允许数据重复和 NULL。
* 前缀索引(Prefix) ：前缀索引只适用于字符串类型的数据。前缀索引是对文本的前几个字符创建索引，相比普通索引建立的数据更小， 因为只取前几个字符。
* 全文索引(Full Text) ：全文索引主要是为了检索大文本数据中的关键字的信息，是目前搜索引擎数据库使用的一种技术。Mysql5.6 之前只有 MYISAM 引擎支持全文索引，5.6 之后 InnoDB 也支持了全文索引。
# 事务
事务是逻辑上的一组操作，要么都执行，要么都不执行
# ACID
* A 原子性
* C 一致性
* I 隔离性
* D 持久性

# SQL标准定义了那些事务？
隔离级别是基于锁和MVCC机制共同实现的
* READ-UNCOMMITTED（读取未提交）
* READ-COMMITTED（读取已提交）（MVCC）
* REPEATABLE-READ（可重复读）（MVCC）
* SERIALIZABLE（可串行化）（锁）
  
# InnoDB有哪几类行锁
* 记录锁（Record Lock）：
* 间隙锁（Gap Lock）：锁定一个范围
* 临键锁（Next-Key Lock）：记录锁+间隙锁